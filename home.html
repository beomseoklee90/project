<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
</head>
<body>

        <div class="d-flex justify-content-center align-items-center mx-auto" style="height: 100vh;">
            <div class="d-inline-block bg-light text-end overflow-auto" style="width:450px;height:750px">
                <div class="d-inline-block w-100" style="height:100px">
                    <span id="korean" class="fs-4 fw-bold">Korean</span>&nbsp;/&nbsp;<span id="japanese" class="fs-4">Japanese</span>
                </div>
                <div class="px-4 w-100 text-start" style="height: 50px;">
                    <span>after clicking a plan click up or down </span>&nbsp;&nbsp;<button id="up" onclick="up();">Up</button>&nbsp;<button id="down" onclick="down();">Down</button>&nbsp;
                </div>
                <div id="plans" class="d-flex justify-content-around align-items-center flex-column overflow-auto text-start" style="height:500px">
                    
                </div>
                <div class="d-flex justify-content-around align-items-center flex-row">
                    <div>Schedule</div>
                    <div class="fw-bold">Plans</div>
                    <div>Todos</div>
                    <div>Notes</div>
                </div>
            </div>
        </div>
</body>
<script>
    let chosenIndex = -1;
    const datas = [
        {id:0, priority:1, content: "finish writing the document"},
        {id:1, priority:2, content: "set AWS EC2 server"},
        {id:2, priority:3, content: "set S3 development environment"},
        {id:3, priority:4, content: "call the customer about the issue"},
    ];

    insertPlans();

    function insertPlans () {
        const plansBoard = document.getElementById("plans");
        console.log(chosenIndex);
        for (let i = 0; i < datas.length; i++) {
            const plan = document.createElement("div");
            plan.setAttribute("class", "d-inline-block w-100");
            let style = "height:80px;";
            if (chosenIndex === i) {
                style = style.concat("border:2px solid black;");
            }
            console.log(style);
            plan.setAttribute("style", style);
            plan.setAttribute("id", datas[i].id)
            plan.innerHTML=`priority:${datas[i].priority}, content:${datas[i].content}`;
            
            plansBoard.appendChild(plan)
        }

        for (let i = 0; i < plansBoard.children.length; i++) {
            plansBoard.children[i].onclick = function (event) {
                chosenIndex = i;
                event.target.style.border = "2px solid black";
                for (let j = 0; j< plansBoard.children.length; j++) {
                    if (i == j) {
                        continue;
                    }    
                    const currentAtt = plansBoard.children[j].getAttribute("style");
                    plansBoard.children[j].setAttribute("style", currentAtt + ";border:none")
                }      
            }
        }
    }

    function up () {
        if (chosenIndex <= 0) {
            return;
        }
        const currentPlan = datas[chosenIndex];
        const upperPlan = datas[chosenIndex-1];
        datas[chosenIndex] = upperPlan;
        datas[chosenIndex].priority++;
        datas[chosenIndex-1] = currentPlan;
        datas[chosenIndex-1].priority--;
        chosenIndex--;
        deletePlans();
        insertPlans();
    }

    function down() {
        if (chosenIndex == -1 || chosenIndex >= datas.length-1) {
            return;
        }
        const currentPlan = datas[chosenIndex];
        const downPlan = datas[chosenIndex+1];
        datas[chosenIndex] = downPlan;
        datas[chosenIndex].priority--;
        datas[chosenIndex+1] = currentPlan;
        datas[chosenIndex+1].priority++;
        chosenIndex++;
        deletePlans();
        insertPlans();
    }

    function deletePlans () {
        const plansBoard = document.getElementById("plans");
        plansBoard.innerHTML="";
    }


</script>
</html>